# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘                          GOLD PICKUP                                      â•‘
# â•‘           Linh Tháº¡ch (Gold) drop tá»« enemy, player collect                 â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ BÃ€I Há»ŒC: TÃ¡i sá»­ dá»¥ng Pattern                                            â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ GoldPickup gáº§n giá»‘ng XpGem:                                             â”‚
# â”‚   - CÃ¹ng cÆ¡ cháº¿ drop + magnet                                           â”‚
# â”‚   - KhÃ¡c mÃ u (vÃ ng thay vÃ¬ xanh)                                        â”‚
# â”‚   - KhÃ¡c hÃ m collect (add gold thay vÃ¬ XP)                              â”‚
# â”‚                                                                         â”‚
# â”‚ DRY PRINCIPLE: "Don't Repeat Yourself"                                  â”‚
# â”‚   - CÃ³ thá»ƒ táº¡o BasePickup class chung (tÃ¹y chá»n)                        â”‚
# â”‚   - Hoáº·c copy-paste vÃ  modify (nhanh hÆ¡n cho prototype)                 â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

extends Area2D
class_name GoldPickup


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                              SETTINGS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ BÃ€I Há»ŒC: @export lÃ  gÃ¬?                                                 â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ @export = Hiá»ƒn thá»‹ biáº¿n trong Godot Inspector                           â”‚
# â”‚                                                                         â”‚
# â”‚ Lá»£i Ã­ch:                                                                â”‚
# â”‚   - Designers cÃ³ thá»ƒ chá»‰nh value mÃ  khÃ´ng cáº§n code                      â”‚
# â”‚   - Override value cho tá»«ng instance riÃªng                              â”‚
# â”‚   - Test balancing nhanh trong Editor                                   â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## GiÃ¡ trá»‹ Gold - enemy khÃ¡c nhau drop khÃ¡c nhau
@export var gold_value: int = 1

## Tá»‘c Ä‘á»™ bay vá» player khi bá»‹ hÃºt (cao hÆ¡n = snappy hÆ¡n)
@export var magnet_speed: float = 350.0

## Tá»‘c Ä‘á»™ vÄƒng ra ban Ä‘áº§u khi drop (tháº¥p = khÃ´ng vÄƒng xa)
@export var scatter_speed: float = 80.0


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                              STATE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ BÃ€I Há»ŒC: State Variables                                                â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ State = Tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a object                                  â”‚
# â”‚                                                                         â”‚
# â”‚ is_attracted: false â†’ Náº±m yÃªn hoáº·c vÄƒng                                 â”‚
# â”‚              true  â†’ Äang bay vá» player                                 â”‚
# â”‚                                                                         â”‚
# â”‚ State machine Ä‘Æ¡n giáº£n: IDLE â†’ ATTRACTED â†’ COLLECTED                    â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

var is_attracted: bool = false    # Äang bá»‹ hÃºt vá» player?
var target_player: Node2D = null  # Player Ä‘ang hÃºt (reference)
var velocity: Vector2 = Vector2.ZERO  # Váº­n tá»‘c di chuyá»ƒn hiá»‡n táº¡i


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                              INITIALIZATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

func _ready() -> void:
	# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
	# â”‚ Scatter Effect: VÄƒng ra ngáº«u nhiÃªn khi spawn                        â”‚
	# â”‚                                                                     â”‚
	# â”‚ randf() * TAU = Random gÃ³c 0Â° Ä‘áº¿n 360Â°                              â”‚
	# â”‚ TAU = 2Ï€ = 6.28... (má»™t vÃ²ng trÃ²n Ä‘áº§y Ä‘á»§)                            â”‚
	# â”‚                                                                     â”‚
	# â”‚ Vector2.from_angle(angle) táº¡o vector hÆ°á»›ng tá»« gÃ³c                   â”‚
	# â”‚ NhÃ¢n vá»›i scatter_speed = cÃ³ velocity ban Ä‘áº§u                        â”‚
	# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
	var random_angle = randf() * TAU
	velocity = Vector2.from_angle(random_angle) * scatter_speed
	
	# Connect signal: Khi cÃ³ body vÃ o Area2D â†’ gá»i callback
	body_entered.connect(_on_body_entered)


## Setup gold value - gá»i tá»« BaseEnemy khi spawn
func setup(value: int) -> void:
	gold_value = value


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                              PHYSICS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

func _physics_process(delta: float) -> void:
	# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
	# â”‚ BÃ€I Há»ŒC: is_instance_valid()                                        â”‚
	# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
	# â”‚ Khi player cháº¿t, target_player bá»‹ queue_free()                      â”‚
	# â”‚ â†’ Reference váº«n tá»“n táº¡i nhÆ°ng object Ä‘Ã£ bá»‹ xÃ³a                      â”‚
	# â”‚ â†’ Gá»i method sáº½ crash!                                              â”‚
	# â”‚                                                                     â”‚
	# â”‚ is_instance_valid() check object cÃ²n tá»“n táº¡i hay khÃ´ng              â”‚
	# â”‚ LUÃ”N check trÆ°á»›c khi dÃ¹ng reference cÃ³ thá»ƒ bá»‹ freed                 â”‚
	# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
	
	if is_attracted and target_player and is_instance_valid(target_player):
		# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
		# TRáº NG THÃI: ATTRACTED - Bay vá» player
		# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
		
		# direction_to(): Vector Ä‘Æ¡n vá»‹ chá»‰ vá» target
		var direction = global_position.direction_to(target_player.global_position)
		var distance = global_position.distance_to(target_player.global_position)
		
		# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
		# â”‚ "Easing" effect: CÃ ng gáº§n player â†’ cÃ ng nhanh                   â”‚
		# â”‚                                                                 â”‚
		# â”‚ distance / 200 = normalize distance (0 khi táº¡i player, 1+ xa)   â”‚
		# â”‚ clamp(..., 0, 1) = giá»›i háº¡n tá»« 0 Ä‘áº¿n 1                           â”‚
		# â”‚ 1 - clamp(...) = Ä‘áº£o ngÆ°á»£c (gáº§n = 1, xa = 0)                    â”‚
		# â”‚ 1 + ... = multiplier tá»« 1x Ä‘áº¿n 2x                               â”‚
		# â”‚                                                                 â”‚
		# â”‚ Káº¿t quáº£: Xa = tá»‘c Ä‘á»™ bÃ¬nh thÆ°á»ng, Gáº§n = tá»‘c Ä‘á»™ x2               â”‚
		# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
		var speed_multiplier = 1.0 + (1.0 - clamp(distance / 200.0, 0.0, 1.0))
		velocity = direction * magnet_speed * speed_multiplier
	else:
		# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
		# TRáº NG THÃI: IDLE - Cháº­m dáº§n vÃ  dá»«ng láº¡i
		# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
		
		# move_toward(): Giáº£m velocity vá» 0 dáº§n dáº§n (200 units/sec deceleration)
		velocity = velocity.move_toward(Vector2.ZERO, 200.0 * delta)
	
	# Di chuyá»ƒn: position += velocity * delta (frame-rate independent)
	global_position += velocity * delta


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                           MAGNET SYSTEM
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ BÃ€I Há»ŒC: Magnet Pattern                                                 â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ Player cÃ³ MagnetArea (Area2D lá»›n xung quanh)                            â”‚
# â”‚ Khi pickup vÃ o vÃ¹ng MagnetArea:                                         â”‚
# â”‚   1. MagnetArea phÃ¡t hiá»‡n pickup (area_entered signal)                  â”‚
# â”‚   2. Gá»i pickup.attract_to(player)                                      â”‚
# â”‚   3. Pickup báº­t is_attracted = true                                     â”‚
# â”‚   4. _physics_process bay vá» player                                     â”‚
# â”‚   5. Cháº¡m player body â†’ collect                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## ÄÆ°á»£c gá»i tá»« Player.MagnetArea khi pickup vÃ o vÃ¹ng hÃºt
func attract_to(player: Node2D) -> void:
	is_attracted = true
	target_player = player


## Signal handler: Khi cháº¡m body (player)
func _on_body_entered(body: Node2D) -> void:
	# Chá»‰ collect khi cháº¡m player (check group)
	if body.is_in_group("player"):
		_collect()


## Thá»±c hiá»‡n collect: add gold, emit signal, play sound, destroy
func _collect() -> void:
	# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
	# â”‚ BÃ€I Há»ŒC: Meta vs In-Run Progression                                 â”‚
	# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
	# â”‚ XP (XpGem) â†’ GameManager.add_xp() â†’ IN-RUN (reset khi cháº¿t)        â”‚
	# â”‚ Gold (GoldPickup) â†’ MetaManager.add_gold() â†’ VÄ¨NH VIá»„N             â”‚
	# â”‚                                                                     â”‚
	# â”‚ MetaManager lÆ°u vÃ o file, khÃ´ng máº¥t khi game Ä‘Ã³ng                   â”‚
	# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
	
	# Add gold (vÄ©nh viá»…n - meta progression)
	MetaManager.add_gold(gold_value)
	
	# Emit signal cho HUD hoáº·c systems khÃ¡c láº¯ng nghe
	Events.gold_collected.emit(gold_value)
	
	# Play sound feedback
	SoundManager.play_gold_collect()
	
	# Debug print (xÃ³a khi release)
	print("ğŸ’° +", gold_value, " Linh Tháº¡ch!")
	
	# XÃ³a pickup khá»i scene
	queue_free()

